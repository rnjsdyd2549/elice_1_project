{% extends 'base.html' %}

{% block scripts %}
<script>
    function regist() {
        let email = $("#email").val()
        let password1 = $("#password1").val()
        let password2 = $("#password2").val()
        
        if(email == '' || password1 == ''){
            alert("아이디와 패스워드를 입력해 주세요.");
            return ;
        }
        
        if (password1 != password2){
            alert("비밀번호를 확인해 주세요!")
            return ;
        }
        
        $.ajax({
            url:'/join',
            type: 'post',
            data: {
                'email': email,
                'password1': password1
            },
            success: function(res){
                if (res['result'] == 'success'){
                     alert("회원가입 성공!")
                     window.location.href = '/'
                }
            }
        })
    }
</script>
{% endblock %}

{% block content %}
<form action="{{ url_for('bp.join') }}" method="POST">

    <h2 class="title">도서관 회원가입</h2>
    <hr>
    <div class="card">
        <div class="card-body">
            <div class="mb-4 row">
                <label class="col-sm-3 col-form-label">이름</label>
                <div class="col-sm-10">
                    <input type="text" name='name' class="form-control" placeholder="이름">
                </div>
            <div class="mb-4 row">
                <label class="col-sm-3 col-form-label">Email</label>
                <div class="col-sm-10">
                    <input type="email" name='email' class="form-control" placeholder="Email">
                </div>
            </div>
            <div class="mb-4 row">
                <label class="col-sm-3 col-form-label">Password</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" id="password1" placeholder="Password">
                </div>
            </div>
            <div class="mb-4 row">
                <label class="col-sm-3 col-form-label">Password Check</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" id="password2" placeholder="동일한 Password">
                </div>
            </div>
            <div>
                <button class="btn btn-primary" onclick=regist()>회원가입하기</button>
            </div>
            <p></p>
            <div>
                <a href="/" class="btn btn-primary">로그인하기</a>
            </div>
        </div>
    </div>
    <hr>
</form>
{% endblock %}
    